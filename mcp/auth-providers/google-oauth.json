{
  "type": "oauth2",
  "displayName": "Google Account",
  "description": "Sign in with your Google account",

  "backend": {
    "authorizeEndpoint": {
      "url": "https://accounts.google.com/o/oauth2/v2/auth",
      "params": {
        "client_id": "{{client_id}}",
        "redirect_uri": "{{redirect_uri}}",
        "response_type": "code",
        "scope": "{{scope}}",
        "state": "{{state}}",
        "access_type": "offline",
        "prompt": "consent"
      }
    },
    "tokenEndpoint": {
      "url": "https://oauth2.googleapis.com/token",
      "method": "POST",
      "headers": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "body": {
        "client_id": "{{client_id}}",
        "client_secret": "{{client_secret}}",
        "code": "{{code}}",
        "redirect_uri": "{{redirect_uri}}",
        "grant_type": "authorization_code"
      },
      "response": {
        "accessToken": "access_token",
        "refreshToken": "refresh_token",
        "expiresIn": "expires_in"
      }
    },
    "refreshEndpoint": {
      "url": "https://oauth2.googleapis.com/token",
      "method": "POST",
      "headers": {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      "body": {
        "client_id": "{{client_id}}",
        "client_secret": "{{client_secret}}",
        "refresh_token": "{{refresh_token}}",
        "grant_type": "refresh_token"
      }
    },
    "credentialsEnv": ["GOOGLE_CLIENT_ID", "GOOGLE_CLIENT_SECRET"],
    "credentialsFile": "credentials/google.json",
    "credentialsFormat": "google"
  },

  "scopes": {
    "gmail": "https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/gmail.readonly https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/gmail.compose",
    "calendar": "https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/calendar.events",
    "workspace": "https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/gmail.readonly https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/gmail.compose https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/drive.readonly https://www.googleapis.com/auth/documents.readonly https://www.googleapis.com/auth/spreadsheets.readonly"
  },

  "runtime": {
    "envMapping": {
      "access_token": "GOOGLE_API_ACCESS_TOKEN",
      "refresh_token": "GOOGLE_REFRESH_TOKEN"
    }
  },

  "ios": {
    "handler": "oauth2",
    "pkceEnabled": true,
    "redirectUri": "heyhouston://oauth-callback",
    "callback_scheme": "heyhouston"
  }
}
