# Redis configuration for Houston
#
# Key setting: Disable write blocking on bgsave errors
# This prevents cascading failures when Redis can't fork() for background saves
# (common on memory-constrained systems with vm.overcommit_memory=0)
#
# Trade-off: If Redis crashes after a failed bgsave, you may lose up to 5 minutes
# of scheduled job data. This is acceptable because:
# 1. The startup verification will repair missing scheduled jobs
# 2. Job data is transient (can be regenerated)
# 3. The alternative (blocking all writes) causes much worse failures

stop-writes-on-bgsave-error no

# Save to disk less frequently (reduces fork pressure)
# Default is: save 900 1, save 300 10, save 60 10000
# We use: save every 5 mins if 100+ changes, or every 15 mins if any changes
save 900 1
save 300 100

# Append-only file disabled (we use RDB snapshots)
# RDB is simpler and uses less memory for our use case
appendonly no

# Maximum memory (optional, uncomment to limit)
# maxmemory 256mb
# maxmemory-policy allkeys-lru

# Log level (reduce verbosity in production)
loglevel notice
